@if (editorDataService.editorData) {
<h3 class="mb-6 flex items-center gap-5">
  <strong>Câu hỏi số</strong>
  @for (questionIndex of [0,1,2,3]; track questionIndex) {
  <button
    mat-stroked-button
    [disabled]="this.selectedQuestionIndex == questionIndex"
    (click)="this.selectedQuestionIndex = questionIndex"
  >
    {{ questionIndex + 1 }}
  </button>
  }
</h3>
<div class="flex flex-col h-[80%]">
  <div class="h-max w-full flex justify-between">
    <div>
      <strong>Câu hỏi:</strong>
      <editable (save)="editorDataService.saveCurrentEditorData()">
        <ng-template viewMode>
          {{
            editorDataService.editorData.questionBank.tt.questions[
              this.selectedQuestionIndex
            ].question !== ""
              ? editorDataService.editorData.questionBank.tt.questions[
                  this.selectedQuestionIndex
                ].question
              : "Nhấp để nhập câu hỏi."
          }}
        </ng-template>
        <ng-template editMode>
          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <input
              matInput
              editableOnEnter
              editableOnEscape
              [(ngModel)]="
                editorDataService.editorData.questionBank.tt.questions[
                  this.selectedQuestionIndex
                ].question
              "
            />
          </mat-form-field>
        </ng-template>
      </editable>
      <br />
      <strong>Đáp án:</strong>
      <editable (save)="editorDataService.saveCurrentEditorData()">
        <ng-template viewMode>
          {{
            editorDataService.editorData.questionBank.tt.questions[
              this.selectedQuestionIndex
            ].answer !== ""
              ? editorDataService.editorData.questionBank.tt.questions[
                  this.selectedQuestionIndex
                ].answer
              : "Nhấp để nhập đáp án."
          }}
        </ng-template>
        <ng-template editMode>
          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <input
              matInput
              editableOnEnter
              editableOnEscape
              [(ngModel)]="
                editorDataService.editorData.questionBank.tt.questions[
                  this.selectedQuestionIndex
                ].answer
              "
            />
          </mat-form-field>
        </ng-template>
      </editable>
    </div>
    <div class="h-full flex gap-5">
      <button
        (click)="uploadNewMedia()"
        mat-stroked-button
        matTooltip="Nhập ảnh mới"
      >
        <mat-icon>attach_file</mat-icon>
        Nhập ảnh câu hỏi
      </button>
      <button
        (click)="uploadNewMedia(true)"
        mat-stroked-button
        matTooltip="Nhập ảnh mới"
      >
        <mat-icon>attach_file</mat-icon>
        Nhập ảnh đáp án
      </button>
    </div>
  </div>
  <div
    class="w-full h-full grid grid-flow-col place-items-center gap-5 items-center box-border px-10 py-5"
  >
    @if (
    editorDataService.editorData.questionBank.tt.questions[this.selectedQuestionIndex].mediaSrc
    ) { @if(
    editorDataService.editorData.questionBank.tt.questions[this.selectedQuestionIndex].type
    === questionType.IMAGE) {
    <div class="grid place-items-center">
      <span>
        <h6>
          Câu hỏi
        </h6>
      </span>
      <img
        class="max-w-max w-10/12 max-h-[100%] rounded-xl"
        [src]="
          editorDataService.editorData.questionBank.tt.questions[
            this.selectedQuestionIndex
          ].mediaSrc
        "
      />
    </div>
    @if (
    editorDataService.editorData.questionBank.tt.questions[this.selectedQuestionIndex].secondaryMediaSrcName
    ) {
    <div class="grid place-items-center">
      <span>
        <h6>
          Đáp án
        </h6>
      </span>
      <img
        class="max-w-max w-10/12 max-h-[100%] rounded-xl"
        [src]="
          editorDataService.editorData.questionBank.tt.questions[
            this.selectedQuestionIndex
          ].secondaryMediaSrc
        "
      />
    </div>
    } } @else if (
    editorDataService.editorData.questionBank.tt.questions[this.selectedQuestionIndex].type
    === questionType.VIDEO) {
    <video
      class="h-full max-h-[50rem] rounded-xl"
      controls
      [src]="
        editorDataService.editorData.questionBank.tt.questions[
          this.selectedQuestionIndex
        ].mediaSrc
      "
    ></video>
    } @else {
    <h5 class="w-full h-full text-center">
      Định dạng câu hỏi không được hỗ trợ.
    </h5>
    } } @else {
    <h5 class="w-full h-full text-center">
      Vui lòng nhập hình ảnh/video cho câu hỏi.
    </h5>
    }
  </div>
</div>

}
